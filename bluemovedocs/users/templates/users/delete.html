{% extends 'base.html' %}
{% load static %}
{% block title %} ë‚´ ê³„ì • | ë¸”ë£¨ë¬´ë¸Œ ë‹¥ìŠ¤ {% endblock %}
{% block content %}
{% include 'shared/_navbar4home.html' %}
<main class="px-2 px-md-5">
    <div class="container-md mt-5 table-responsive">
        <h1 class="mb-4 pb-2" style="font-weight: 600; color: #58595B;">ğŸ’™ ë‚´ ê³„ì •</h1>
        <div class="callout callout-dark" style="word-break: break-word;">
            <span style="font-weight: 600; color: #58595B;"><i class="fas fa-user-times"></i> íšŒì› ì •ë³´ ì‚­ì œ</span><br>
            <small style="color: #6C757D;">íšŒì› ì •ë³´ ì‚­ì œ ì‹œ ë¸”ë£¨ë¬´ë¸Œ ë‹¥ìŠ¤ì— ì €ì¥ëœ {{ user.email }} ê³„ì • ì •ë³´ì™€ ì•„ë˜ ì•ˆë‚´ëœ ìë£Œê°€ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.</small>
        </div>

        <!-- ë¸”ë£¨ë¬´ë²„ì¼ ê²½ìš° -->
        {% if user.profile.level == 'bluemover' %}
            <div class="container-md px-0">
                <div class="mt-4">
                    <div class="row row-cols-1 row-cols-lg-2 g-4">
                        <div class="col">
                            <div class="shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“¢ ì‚­ì œë  ê³µì§€ì‚¬í•­</h5>
                                    <p class="card-text">
                                        {% if my_notices %}
                                            {{ user.first_name }}ë‹˜ì´ ì‘ì„±í•˜ì‹  <b>ê³µì§€ì‚¬í•­ {{ my_notices|length }}ê°œ</b>ê°€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.
                                        {% else %}
                                            {{ user.first_name }}ë‹˜ì´ ì‘ì„±í•˜ì‹  ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ’¬ ì‚­ì œë  ëŒ“ê¸€</h5>
                                    <p class="card-text">
                                        {% if my_comments %}
                                            {{ user.first_name }}ë‹˜ì´ ì‘ì„±í•˜ì‹  <b>ëŒ“ê¸€ {{ my_comments|length }}ê°œ</b>ê°€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.
                                        {% else %}
                                            {{ user.first_name }}ë‹˜ì´ ì‘ì„±í•˜ì‹  ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                        {% if my_boxes|length > 0 %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body" style="background-color: #f8d7da;">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“ ë¬¸ì„œí•¨ ì‚­ì œ í•„ìš”</h5>
                                        <p class="card-text">
                                            íšŒì› ì •ë³´ë¥¼ ì‚­ì œí•˜ì‹œë ¤ë©´
                                            {{ user.first_name }}ë‹˜ì´ ìƒì„±í•˜ì‹  <b>ë¬¸ì„œí•¨ {{ my_boxes|length }}ê°œ</b>ë¥¼
                                            ë¨¼ì € ì‚­ì œí•´ì£¼ì„¸ìš”.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“ ì‚­ì œë  ë¬¸ì„œí•¨</h5>
                                        <p class="card-text">
                                            {{ user.first_name }}ë‹˜ì´ ìƒì„±í•˜ì‹  ë¬¸ì„œí•¨ì´ ì—†ìŠµë‹ˆë‹¤.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        {% if my_docs_return %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“„ ì‚­ì œë  ë¬¸ì„œ</h5>
                                        <p class="card-text">
                                            ì—†ìŠµë‹ˆë‹¤!
                                            {% if user.profile.level == 'bluemover' %}
                                                ìŠ¹ì¸ëœ ë¬¸ì„œëŠ”
                                            {% else %}
                                                ë°˜í™˜ëœ ë¬¸ì„œëŠ”
                                            {% endif %}
                                            íšŒì› ì •ë³´ ì‚­ì œì˜ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% elif my_docs_create or my_docs_submit or my_docs_reject %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body" style="background-color: #f8d7da;">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“„ ë¬¸ì„œ ì²˜ë¦¬ í•„ìš”</h5>
                                        <p class="card-text">
                                            íšŒì› ì •ë³´ë¥¼ ì‚­ì œí•˜ì‹œë ¤ë©´ {{ user.first_name }}ë‹˜ì˜
                                            {% if my_docs_create %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_submit %}
                                                <b>ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_reject %}
                                                <b>ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_create and my_docs_submit %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€, ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_create and my_docs_reject %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€, ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_submit and my_docs_reject %}
                                                <b>ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€, ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_create and my_docs_submit and my_docs_reject %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€, ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€, ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% endif %}
                                            ë¨¼ì € ì²˜ë¦¬í•´ì£¼ì„¸ìš”.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“„ ì‚­ì œë  ë¬¸ì„œ</h5>
                                        <p class="card-text">
                                            {{ user.first_name }}ë‹˜ì´ ìƒì„±í•˜ì‹  ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        <!-- ê²ŒìŠ¤íŠ¸ì¼ ê²½ìš° -->
        {% elif user.profile.level == 'guest' %}
            <div class="container-md mb-1 px-0">
                <div class="mt-4">
                    <div class="row row-cols-1 row-cols-lg-2 g-4">
                        <div class="col">
                            <div class="shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ’¬ ì‚­ì œë  ëŒ“ê¸€</h5>
                                    <p class="card-text">
                                        {% if my_comments %}
                                            {{ user.first_name }}ë‹˜ì´ ì‘ì„±í•˜ì‹  <b>ëŒ“ê¸€ {{ my_comments|length }}ê°œ</b>ê°€ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.
                                        {% else %}
                                            {{ user.first_name }}ë‹˜ì´ ì‘ì„±í•˜ì‹  ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                        {% if my_docs_return %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“„ ì‚­ì œë  ë¬¸ì„œ</h5>
                                        <p class="card-text">
                                            ì—†ìŠµë‹ˆë‹¤!
                                            {% if user.profile.level == 'bluemover' %}
                                                ìŠ¹ì¸ëœ ë¬¸ì„œëŠ”
                                            {% else %}
                                                ë°˜í™˜ëœ ë¬¸ì„œëŠ”
                                            {% endif %}
                                            íšŒì› ì •ë³´ ì‚­ì œì˜ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% elif my_docs_create or my_docs_submit or my_docs_reject %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body" style="background-color: #f8d7da;">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“„ ë¬¸ì„œ ì²˜ë¦¬ í•„ìš”</h5>
                                        <p class="card-text">
                                            íšŒì› ì •ë³´ë¥¼ ì‚­ì œí•˜ì‹œë ¤ë©´ {{ user.first_name }}ë‹˜ì˜
                                            {% if my_docs_create %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_submit %}
                                                <b>ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_reject %}
                                                <b>ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_create and my_docs_submit %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€, ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_create and my_docs_reject %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€, ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_submit and my_docs_reject %}
                                                <b>ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€, ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% elif my_docs_create and my_docs_submit and my_docs_reject %}
                                                <b>ë¯¸ì œì¶œ ë¬¸ì„œ {{ my_docs_create|length }}ë¶€, ì œì¶œëœ ë¬¸ì„œ {{ my_docs_submit|length }}ë¶€, ë°˜ë ¤ëœ ë¬¸ì„œ {{ my_docs_reject|length }}ë¶€</b>ë¥¼
                                            {% endif %}
                                            ë¨¼ì € ì²˜ë¦¬í•´ì£¼ì„¸ìš”.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            <div class="col">
                                <div class="shadow-sm h-100">
                                    <div class="card-body">
                                        <h5 class="card-title" style="font-weight: 600; color: #58595B;">ğŸ“„ ì‚­ì œë  ë¬¸ì„œ</h5>
                                        <p class="card-text">
                                            {{ user.first_name }}ë‹˜ì´ ìƒì„±í•˜ì‹  ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endif %}

        {% for account in user.socialaccount_set.all %}
            <form action="{% url 'users:delete' user.id %}" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
                {% csrf_token %}
                <div class="container-md mt-5 p-0 d-grid gap-2 d-sm-flex justify-content-sm-end">
                    {% if my_boxes|length > 0 or my_docs_create or my_docs_submit or my_docs_reject %}
                        <button type="button" class="btn btn-outline-danger" disabled>ì‚­ì œí•˜ê¸°</button>
                    {% else %}
                        <button type="submit" class="btn btn-outline-danger">ì‚­ì œí•˜ê¸°</button>
                    {% endif %}
                    <a href="{% url 'users:myaccount' user.id %}" class="btn btn-outline-secondary">ì·¨ì†Œí•˜ê¸°</a>
                </div>
            </form>
        {% empty %}
        {% endfor %}

    </div>

    </div>
</main>
{% endblock %}