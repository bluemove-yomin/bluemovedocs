<!--  
0~768px noticetable-list 출력
769px~ noticetable-table 출력
 -->

<!-- noticetable-table -->
<div class="table-responsive" id="noticetable-table">
    <table class="table">
        <thead>
            <tr>
                <th scope="col">대상</th>
                <th scope="col">제목</th>
                <th scope="col">담당</th>
                <th scope="col">작성일</th>
                <th class="text-center" scope="col"></th>
            </tr>
        </thead>
        <tbody>
            {% for notice in my_notices %}
            <tr>
                <th scope="row">
                    {% if notice.category == 'bluemover' %}
                    블루무버
                    {% endif %}
                    {% if notice.category == 'posongvi' %}
                    뽀송비 학생
                    {% endif %}
                    {% if notice.category == 'applicant' %}
                    블루무버 희망자
                    {% endif %}
                </th>
                <td><a href="{% url 'notice:read' notice.id %}">{{ notice.title }}</a></td>
                <td>
                    {% if not notice.writer.first_name == '' %}
                    {{ notice.writer.last_name }}{{ notice.writer.first_name }}
                    {% else %}
                    {{ notice.writer }}
                    {% endif %}
                </td>
                <td>
                    {% if notice.created_at == notice.updated_at %}
                    {{ notice.created_at }}
                    {% else %}
                    {{ notice.created_at }} <small>({{ notice.updated_at }} 수정)</small>
                    {% endif %}
                </td>
                <td>
                    {% if user.is_authenticated %}
                    <!-- Button trigger modal -->
                    <div class="text-center">
                        <a class="bookmark" href="{% url 'notice:notice_favorite' notice.id %}?next={{ request.path }}">
                            {% if user in notice.favorite_user_set.all %}
                            <i class="fas fa-bookmark"></i>
                            {% else %}
                            <i class="far fa-bookmark"></i>
                            {% endif %}
                        </a>
                    </div>
                    {% else %}
                    <div class="text-center">
                        <a type="button" class="bookmark" data-bs-toggle="modal" data-bs-target="#tableloginModal">
                            <i class="far fa-bookmark"></i>
                        </a>
                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="tableloginModal" tabindex="-1" aria-labelledby="tableloginModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="tableloginModalLabel" style="font-weight: 600;">🔑 로그인 필요</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                로그인이 필요한 작업입니다.<br>로그인하시겠어요?
                            </div>
                            <div class="modal-footer">
                            <a type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">앗, 잠시만요.</a>
                            <a type="button" href="{% url 'account_login' %}?next={{ request.path }}" class="btn btn-outline-primary">네, 로그인할게요!</a>
                            </div>
                        </div>
                        </div>
                    </div>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


<!-- noticetable-list -->
<div class="list-group list-group-flush pt-2" id="noticetable-list">
    {% for notice in my_notices %}
    <div class="list-group-item px-0">
        <div class="d-flex w-100 justify-content-between">
            <p class="mb-1" style="font-weight: 600;">
                {% if notice.category == 'bluemover' %}
                블루무버
                {% endif %}
                {% if notice.category == 'posongvi' %}
                뽀송비 학생
                {% endif %}
                {% if notice.category == 'applicant' %}
                블루무버 희망자
                {% endif %}
            </p>
            {% if user.is_authenticated %}
            <!-- Button trigger modal -->
            <a class="bookmark" href="{% url 'notice:notice_favorite' notice.id %}?next={{ request.path }}">
                {% if user in notice.favorite_user_set.all %}
                <p class="mb-1"><i class="fas fa-bookmark"></i></p>
                {% else %}
                <p class="mb-1"><i class="far fa-bookmark"></i></p>
                {% endif %}
            </a>
            {% else %}
            <a type="button" class="bookmark" data-bs-toggle="modal" data-bs-target="#listloginModal">
                <p class="mb-1"><i class="far fa-bookmark"></i></p>
            </a>
            <!-- Modal -->
            <div class="modal fade" id="listloginModal" tabindex="-1" aria-labelledby="listloginModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="listloginModalLabel" style="font-weight: 600;">🔑 로그인 필요</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            로그인이 필요한 작업입니다.<br>로그인하시겠어요?
                        </div>
                        <div class="modal-footer">
                            <a type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">앗, 잠시만요.</a>
                            <a type="button" href="{% url 'account_login' %}?next={{ request.path }}" class="btn btn-outline-primary">네, 로그인할게요!</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
        <h5 class="mb-1"><a href="{% url 'notice:read' notice.id %}">{{ notice.title }}</a></h5>
        <div class="d-flex w-100 justify-content-between">
            <small>
                {% if not notice.writer.first_name == '' %}
                {{ notice.writer.last_name }}{{ notice.writer.first_name }}
                {% else %}
                {{ notice.writer }}
                {% endif %}
                │
                {% if notice.created_at == notice.updated_at %}
                {{ notice.created_at }}
                {% else %}
                {{ notice.created_at }} ({{ notice.updated_at }} 수정)
                {% endif %}
            </small>
        </div>
    </div>
    {% endfor %}
</div>